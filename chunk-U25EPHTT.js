import{c as V}from"./chunk-KPGLZVDS.js";import{a as N}from"./chunk-R6EMO2V3.js";import{a as B,b as v,c as D,d as H,h as A,i as R,j as q,k as Z,m as P}from"./chunk-S7NLLRCM.js";import"./chunk-XTCYTLKK.js";import{q as I,r as M}from"./chunk-WFJGIRJF.js";import{$a as F,Ab as G,Bb as f,Ib as a,Jb as C,Kb as S,Ob as w,Pb as E,Qb as k,Ra as o,Wb as x,Xb as b,Y as h,ea as y,eb as s,fa as L,ga as g,ha as c,kb as _,ob as m,rb as e,sb as t,tb as d,wb as T}from"./chunk-VEIXIB2E.js";import"./chunk-EQDQRRRY.js";function z(i,n){i&1&&(e(0,"li"),a(1,"email is required"),t())}function U(i,n){i&1&&(e(0,"li"),a(1,"Enter valid Email"),t())}function $(i,n){if(i&1&&(e(0,"div",6),g(),e(1,"svg",15),d(2,"path",16),t(),c(),e(3,"span",17),a(4,"Danger"),t(),e(5,"div")(6,"ul",18),s(7,z,2,0,"li")(8,U,2,0,"li"),t()()()),i&2){f();let r=k(6);o(7),m(r!=null&&r.getError("required")?7:r!=null&&r.getError("email")?8:-1)}}function J(i,n){i&1&&(e(0,"li"),a(1,"password is required"),t())}function K(i,n){i&1&&(e(0,"li"),a(1,"Enter valid password"),t())}function O(i,n){if(i&1&&(e(0,"div",6),g(),e(1,"svg",15),d(2,"path",16),t(),c(),e(3,"span",17),a(4,"Danger"),t(),e(5,"div")(6,"ul",18),s(7,J,2,0,"li")(8,K,2,0,"li"),t()()()),i&2){f();let r=k(13);o(7),m(r!=null&&r.getError("required")?7:r!=null&&r.getError("pattern")?8:-1)}}function Q(i,n){i&1&&(e(0,"span"),d(1,"i",19),t())}function W(i,n){if(i&1&&(e(0,"div",13),g(),e(1,"svg",20),d(2,"path",16),t(),c(),e(3,"span",17),a(4,"Info"),t(),e(5,"div")(6,"span",21),a(7),t()()()),i&2){let r=f();o(7),C(r.msgErr)}}function X(i,n){if(i&1&&(e(0,"div",14),g(),e(1,"svg",20),d(2,"path",16),t(),c(),e(3,"span",17),a(4,"Info"),t(),e(5,"div")(6,"span",21),a(7),t()()()),i&2){let r=f();o(7),C(r.msgSuc)}}var j=class i{authService=h(N);route=h(I);formBuilder=h(Z);isLoading=!1;msgErr="";msgSuc="";loginForm=this.formBuilder.group({email:[null,[v.required,v.email]],password:[null,[v.required,v.pattern(/^[A-Z]\w{7,}$/)]]});submitForm(){this.loginForm.valid?(this.isLoading=!0,this.authService.sendLoginForm(this.loginForm.value).subscribe({next:n=>{console.log(n),n.message==="success"&&(setTimeout(()=>{localStorage.setItem("userToken",n.token),this.authService.saveUserData(),this.route.navigate(["/home"])},500),this.msgSuc=n.message),this.isLoading=!1},error:n=>{console.log(n),this.msgErr=n.error.message,this.isLoading=!1}})):this.loginForm.markAllAsTouched()}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=F({type:i,selectors:[["app-login"]],decls:31,vars:21,consts:[[1,"mx-auto","w-[60%]","bg-gray-50","rounded","border-1","shadow","p-5"],[1,"capitalize","text-2xl","text-green-600","font-bold","pb-3","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","email","type","email","id","email",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","password","type","password","id","password",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"flex","justify-between"],["type","submit",1,"btn-main",3,"disabled"],["routerLink","/forgot",1,"ms-4","font-medium","text-blue-600","dark:text-blue-500","hover:underline","cursor-pointer"],["type","reset",1,"rounded","text-white","bg-lime-800","hover:bg-lime-600","transition-colors","duration-500","py-2","px-12"],["role","alert",1,"my-4","flex","items-center","p-4","mb-4","text-sm","text-red-800","border","border-red-300","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400","dark:border-red-800"],["role","alert",1,"my-4","flex","items-center","p-4","mb-4","text-sm","text-green-800","border","border-green-300","rounded-lg","bg-green-50","dark:bg-gray-800","dark:text-green-400","dark:border-green-800"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fas","fa-spin","fa-spinner"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3"],[1,"font-medium"]],template:function(r,l){if(r&1){let p=T();e(0,"section",0)(1,"h1",1),a(2),x(3,"translate"),t(),e(4,"form",2),G("ngSubmit",function(){return y(p),L(l.submitForm())}),e(5,"div",3),w(6),e(7,"label",4),a(8),x(9,"translate"),t(),d(10,"input",5),s(11,$,9,1,"div",6),t(),e(12,"div",3),w(13),e(14,"label",7),a(15),x(16,"translate"),t(),d(17,"input",8),s(18,O,9,1,"div",6),t(),e(19,"div",9)(20,"div")(21,"button",10),a(22),x(23,"translate"),s(24,Q,2,0,"span"),t(),e(25,"a",11),a(26,"Forgot Password"),t()(),e(27,"button",12),a(28,"Reset"),t()(),s(29,W,8,1,"div",13)(30,X,8,1,"div",14),t()()}if(r&2){o(2),C(b(3,11,"login.loginNow")),o(2),_("formGroup",l.loginForm),o(2);let p=E(l.loginForm.get("email"));o(2),S("",b(9,14,"login.email"),":"),o(3),m(p!=null&&p.errors&&(p!=null&&p.touched)?11:-1),o(2);let u=E(l.loginForm.get("password"));o(2),S("",b(16,17,"login.password"),":"),o(3),m(u!=null&&u.errors&&(u!=null&&u.touched)?18:-1),o(3),_("disabled",l.isLoading),o(),S("",b(23,19,"login.signin")," "),o(2),m(l.isLoading?24:-1),o(5),m(l.msgErr&&!l.msgSuc?29:-1),o(),m(l.msgSuc?30:-1)}},dependencies:[P,A,B,D,H,R,q,M,V],encapsulation:2})};export{j as LoginComponent};
