import{a as $}from"./chunk-GQADVFQD.js";import{a as O}from"./chunk-7BSCAMFA.js";import{a as Y}from"./chunk-5R6CRGZJ.js";import{l as j}from"./chunk-TDOEA3BW.js";import"./chunk-P4V3XCEK.js";import{i as P}from"./chunk-3ICPM7S4.js";import{o as F}from"./chunk-HZLQKCUW.js";import{$a as k,$b as S,Bb as C,Cb as s,Kb as a,Lb as g,Mb as b,Oa as D,Ra as l,Vb as V,Xa as I,Y as f,Zb as h,ea as d,eb as y,fa as u,kb as _,ob as E,qb as T,rb as B,sb as n,ta as w,tb as o,ub as p,xb as v}from"./chunk-SB5BPJ2M.js";import{e as N}from"./chunk-EQDQRRRY.js";var x=N(O());var U=r=>["/checkout",r],q=(r,e)=>e.product.id;function A(r,e){if(r&1){let t=v();n(0,"div",6)(1,"div"),p(2,"img",8),o(),n(3,"div",9)(4,"div")(5,"h3"),a(6),o(),n(7,"h4"),a(8),h(9,"currency"),o(),n(10,"button",10),C("click",function(){let c=d(t).$implicit,m=s(2);return u(m.deleteItem(c.product.id))}),p(11,"i",11),a(12,"Remove"),o()(),n(13,"div",12)(14,"button",13),C("click",function(){let c=d(t).$implicit,m=s(2);return u(m.updateCount(c.product.id,c.count+1))}),p(15,"i",14),o(),n(16,"span"),a(17),o(),n(18,"button",13),C("click",function(){let c=d(t).$implicit,m=s(2);return u(m.updateCount(c.product.id,c.count-1))}),p(19,"i",15),o()()()()}if(r&2){let t=e.$implicit;l(2),_("src",t.product.imageCover,D)("alt",t.product.title),l(4),g(t.product.title),l(2),b("Price: ",S(9,5,t.price,"GBP"),""),l(9),g(t.count)}}function G(r,e){if(r&1){let t=v();n(0,"section",0)(1,"h1",2),a(2," \u{1F6D2} Your Cart"),o(),n(3,"div",3)(4,"span",4),a(5),h(6,"currency"),o(),n(7,"button",5),C("click",function(){d(t);let c=s();return u(c.clearCart())}),a(8,"Clear Cart"),o()(),T(9,A,20,8,"div",6,q),n(11,"button",7),a(12,"Checkout"),o()()}if(r&2){let t=s();l(5),b("Total Cart Price : ",S(6,2,t.cartDetails().totalCartPrice,"GBP"),""),l(4),B(t.cartDetails().products),l(2),_("routerLink",V(5,U,t.cartDetails()._id))}}function M(r,e){r&1&&(n(0,"h1",1),a(1,"No Data Found"),o())}var L=class r{constructor(e){this.cartService=e}toastrService=f(j);spinner=f($);cartDetails=w({});ngOnInit(){this.getCartData(),localStorage.setItem("userId",this.cartDetails()._id)}getCartData(){this.spinner.show(),this.cartService.getLoggedUserCart().subscribe({next:e=>{console.log(e.data),this.cartDetails.set(e.data),this.spinner.hide()},error:e=>{console.log(e)}})}deleteItem(e){x.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&(this.cartService.removeFromCart(e).subscribe({next:i=>{console.log(i),this.cartDetails.set(i.data),this.cartService.cartCount.set(i.numOfCartItems)},error:i=>{console.log(i)}}),x.default.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}))})}updateCount(e,t){this.cartService.updateProductQuanity(e,t).subscribe({next:i=>{console.log(i),i.status=="success"&&this.toastrService.info("success","FreshCart"),this.cartDetails.set(i.data)},error:i=>{console.log(i)}})}clearCart(){x.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&(this.cartService.clearUserCart().subscribe({next:t=>{console.log(t),t.message=="success"&&(this.cartDetails.set({}),this.cartService.cartCount.set(0))},error:t=>{console.log(t)}}),x.default.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}))})}static \u0275fac=function(t){return new(t||r)(I(Y))};static \u0275cmp=k({type:r,selectors:[["app-cart"]],decls:2,vars:1,consts:[[1,"min-sec","w-[75%]","mx-auto"],[1,"text-center","text-green-700","text-3xl"],[1,"text-green-600","text-center","text-3xl","font-bold","mb-6"],[1,"flex","justify-between","items-center","pb-3"],[1,"text-green-500"],[1,"bg-red-600","border","rounded","text-sm","px-10","text-white","hover:bg-red-400",3,"click"],[1,"grid","md:grid-cols-[10%_minmax(0,1fr)]","border-b","mb-2","gap-3"],[1,"btn-main",3,"routerLink"],[1,"w-full","object-contain",3,"src","alt"],[1,"flex","justify-between","items-center"],[3,"click"],[1,"fas","fa-trash-can","text-red-700"],[1,"flex","items-center","gap-4"],[1,"text-green-500","text-2xl",3,"click"],[1,"fa-regular","fa-square-plus"],[1,"fa-regular","fa-square-minus"]],template:function(t,i){t&1&&y(0,G,13,7,"section",0)(1,M,2,0,"h1",1),t&2&&E(i.cartDetails().totalCartPrice?0:1)},dependencies:[F,P],encapsulation:2})};export{L as CartComponent};
