import{a as P}from"./chunk-XUBTCLG6.js";import"./chunk-G5KA7DMQ.js";import{a as G,b as u,c as M,d as N,e as k,f as x,h as q,i as D,j as I,m as H}from"./chunk-6Y6WHHO3.js";import"./chunk-P4V3XCEK.js";import{h as V}from"./chunk-3ICPM7S4.js";import"./chunk-HZLQKCUW.js";import{$a as T,Bb as v,Cb as c,Kb as r,Lb as S,Ra as a,Rb as E,Sb as h,Tb as y,Xa as L,Y as F,ea as C,eb as d,fa as b,ga as g,ha as f,kb as _,ob as s,sb as t,tb as n,ub as m,xb as w}from"./chunk-SB5BPJ2M.js";import"./chunk-EQDQRRRY.js";function Z(i,o){i&1&&(t(0,"li"),r(1,"email is required"),n())}function R(i,o){i&1&&(t(0,"li"),r(1,"Enter valid Email"),n())}function j(i,o){if(i&1&&(t(0,"div",7),g(),t(1,"svg",10),m(2,"path",11),n(),f(),t(3,"span",12),r(4,"Danger"),n(),t(5,"div")(6,"ul",13),d(7,Z,2,0,"li")(8,R,2,0,"li"),n()()()),i&2){c();let e=y(2);a(7),s(e!=null&&e.getError("required")?7:e!=null&&e.getError("email")?8:-1)}}function B(i,o){i&1&&(t(0,"span"),m(1,"i",14),n())}function $(i,o){if(i&1&&(t(0,"div",9),g(),t(1,"svg",15),m(2,"path",11),n(),f(),t(3,"span",12),r(4,"Info"),n(),t(5,"div")(6,"span",16),r(7),n()()()),i&2){let e=c(2);a(7),S(e.msgErr)}}function z(i,o){if(i&1){let e=w();t(0,"form",3),v("ngSubmit",function(){C(e);let p=c();return b(p.verfiyEmailSubmit())}),t(1,"div",4),E(2),t(3,"label",5),r(4,"email:"),n(),m(5,"input",6),d(6,j,9,1,"div",7),n(),t(7,"div")(8,"button",8),r(9,"Verify Email "),d(10,B,2,0,"span"),n()(),d(11,$,8,1,"div",9),n()}if(i&2){let e=c();_("formGroup",e.verifyEmail),a(2);let l=h(e.verifyEmail.get("email"));a(4),s(l!=null&&l.errors&&(l!=null&&l.touched)?6:-1),a(2),_("disabled",e.isLoading),a(2),s(e.isLoading?10:-1),a(),s(e.msgErr&&!e.msgSuc?11:-1)}}function U(i,o){i&1&&(t(0,"span"),m(1,"i",14),n())}function J(i,o){if(i&1&&(t(0,"div",9),g(),t(1,"svg",15),m(2,"path",11),n(),f(),t(3,"span",12),r(4,"Info"),n(),t(5,"div")(6,"span",16),r(7),n()()()),i&2){let e=c(2);a(7),S(e.msgErr)}}function K(i,o){if(i&1){let e=w();t(0,"form",3),v("ngSubmit",function(){C(e);let p=c();return b(p.verfiyCodeSubmit())}),t(1,"div",4)(2,"label",17),r(3,"Code:"),n(),m(4,"input",18),n(),t(5,"div")(6,"button",8),r(7,"Verify Code "),d(8,U,2,0,"span"),n()(),d(9,J,8,1,"div",9),n()}if(i&2){let e=c();_("formGroup",e.verifyCode),a(6),_("disabled",e.isLoading),a(2),s(e.isLoading?8:-1),a(),s(e.msgErr&&!e.msgSuc?9:-1)}}function O(i,o){i&1&&(t(0,"li"),r(1,"email is required"),n())}function Q(i,o){i&1&&(t(0,"li"),r(1,"Enter valid Email"),n())}function W(i,o){if(i&1&&(t(0,"div",7),g(),t(1,"svg",10),m(2,"path",11),n(),f(),t(3,"span",12),r(4,"Danger"),n(),t(5,"div")(6,"ul",13),d(7,O,2,0,"li")(8,Q,2,0,"li"),n()()()),i&2){c();let e=y(2);a(7),s(e!=null&&e.getError("required")?7:e!=null&&e.getError("email")?8:-1)}}function X(i,o){i&1&&(t(0,"li"),r(1,"password is required"),n())}function Y(i,o){i&1&&(t(0,"li"),r(1,"Enter valid Password"),n())}function ee(i,o){if(i&1&&(t(0,"div",7),g(),t(1,"svg",10),m(2,"path",11),n(),f(),t(3,"span",12),r(4,"Danger"),n(),t(5,"div")(6,"ul",13),d(7,X,2,0,"li")(8,Y,2,0,"li"),n()()()),i&2){c();let e=y(8);a(7),s(e!=null&&e.getError("required")?7:e!=null&&e.getError("pattern")?8:-1)}}function te(i,o){i&1&&(t(0,"span"),m(1,"i",14),n())}function ie(i,o){if(i&1&&(t(0,"div",9),g(),t(1,"svg",15),m(2,"path",11),n(),f(),t(3,"span",12),r(4,"Info"),n(),t(5,"div")(6,"span",16),r(7),n()()()),i&2){let e=c(2);a(7),S(e.msgErr)}}function ne(i,o){if(i&1){let e=w();t(0,"form",3),v("ngSubmit",function(){C(e);let p=c();return b(p.resetSubmit())}),t(1,"div",4),E(2),t(3,"label",5),r(4,"email:"),n(),m(5,"input",19),d(6,W,9,1,"div",7),n(),t(7,"div",4),E(8),t(9,"label",5),r(10,"New Password:"),n(),m(11,"input",20),d(12,ee,9,1,"div",7),n(),t(13,"div")(14,"button",8),r(15,"Reset Password "),d(16,te,2,0,"span"),n()(),d(17,ie,8,1,"div",9),n()}if(i&2){let e=c();_("formGroup",e.resetPassowrd),a(2);let l=h(e.resetPassowrd.get("email"));a(4),s(l!=null&&l.errors&&(l!=null&&l.touched)?6:-1),a(2);let p=h(e.resetPassowrd.get("newPassword"));a(4),s(p!=null&&p.errors&&(p!=null&&p.touched)?12:-1),a(2),_("disabled",e.isLoading),a(2),s(e.isLoading?16:-1),a(),s(e.msgErr&&!e.msgSuc?17:-1)}}var A=class i{constructor(o){this.authService=o}router=F(V);step=1;isLoading=!1;msgErr="";msgSuc="";verifyEmail=new k({email:new x(null,[u.required,u.email])});verifyCode=new k({resetCode:new x(null,[u.required,u.pattern(/^[0-9]{6} $/)])});resetPassowrd=new k({email:new x(null,[u.required,u.email]),newPassword:new x(null,[u.required,u.pattern(/^[A-Z]\w{7,}$/)])});verfiyEmailSubmit(){this.isLoading=!0,this.resetPassowrd.get("email")?.patchValue(this.verifyEmail.get("email")?.value),this.authService.setEmailVerify(this.verifyEmail.value).subscribe({next:o=>{console.log(o),this.msgSuc=o.statusMsg,o.statusMsg=="success"?this.step=2:this.msgErr=o.message,this.isLoading=!1},error:o=>{this.msgErr=o.message,console.log(o),this.isLoading=!1}})}verfiyCodeSubmit(){this.isLoading=!0,this.authService.setCodeVerify(this.verifyCode.value).subscribe({next:o=>{console.log(o),o.status=="Success"&&(this.step=3),this.isLoading=!1},error:o=>{console.log(o),this.msgErr=o.massage}})}resetSubmit(){this.isLoading=!0,this.authService.setNewPassword(this.resetPassowrd.value).subscribe({next:o=>{console.log(o),this.isLoading=!1,localStorage.setItem("userToken",o.token),this.authService.saveUserData(),this.router.navigate(["/home"])},error:o=>{console.log(o),this.isLoading=!1}})}static \u0275fac=function(e){return new(e||i)(L(P))};static \u0275cmp=T({type:i,selectors:[["app-forgotpassword"]],decls:6,vars:1,consts:[[1,"mx-auto","w-[60%]","bg-gray-50","rounded","border-1","shadow","p-5"],[1,"capitalize","text-2xl","text-green-600","font-bold","pb-3","text-center"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","email","type","email","id","email",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["type","submit",1,"btn-main",3,"disabled"],["role","alert",1,"my-4","flex","items-center","p-4","mb-4","text-sm","text-red-800","border","border-red-300","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400","dark:border-red-800"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fas","fa-spin","fa-spinner"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3"],[1,"font-medium"],["for","code",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","resetCode","type","text","id","code",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["formControlName","email","readonly","","type","email","id","email",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["formControlName","newPassword","type","email","id","email",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"]],template:function(e,l){e&1&&(t(0,"section",0)(1,"h1",1),r(2,"Forgot Password"),n(),d(3,z,12,6,"form",2)(4,K,10,4,"form",2)(5,ne,18,8,"form",2),n()),e&2&&(a(3),s(l.step==1?3:l.step==2?4:5))},dependencies:[H,q,G,M,N,D,I],encapsulation:2})};export{A as ForgotpasswordComponent};
