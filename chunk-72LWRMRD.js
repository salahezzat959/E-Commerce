import{a as O}from"./chunk-A7ZOLQ3Z.js";import{a as A}from"./chunk-G5KA7DMQ.js";import{a as w}from"./chunk-5R6CRGZJ.js";import"./chunk-P4V3XCEK.js";import{g as E,l as T,n as P,o as k}from"./chunk-HZLQKCUW.js";import{$a as u,$b as p,Cb as C,Fb as I,Kb as o,Lb as h,Mb as a,Nb as x,Oa as g,Ra as t,Xa as f,Y as v,Zb as l,_b as _,eb as y,kb as s,ob as S,qb as m,rb as c,sb as i,tb as n,ub as b}from"./chunk-SB5BPJ2M.js";import"./chunk-EQDQRRRY.js";var B=(d,r)=>r.id,F=(d,r)=>r._id;function N(d,r){d&1&&(i(0,"div",2),o(1," No orders found. "),n())}function M(d,r){if(d&1&&(i(0,"div",10),b(1,"img",17),i(2,"div",18)(3,"h3",19),o(4),n(),i(5,"p",6),o(6),n(),i(7,"p",15),o(8,"Quantity: "),i(9,"span",20),o(10),n()()(),i(11,"div",21),o(12),l(13,"currency"),n()()),d&2){let e=r.$implicit;t(),I("alt",e.product.title),s("src",e.product.imageCover,g),t(3),a(" ",e.product.title," "),t(2),x("",e.product.category.name," \u2022 ",e.product.brand.name,""),t(4),h(e.count),t(2),a(" ",p(13,7,e.price,"GBP")," ")}}function U(d,r){if(d&1&&(i(0,"div",3)(1,"div",4)(2,"div")(3,"h2",5),o(4),n(),i(5,"p",6),o(6),l(7,"date"),n()(),i(8,"div",7)(9,"span",8),o(10),n()()(),i(11,"div",9),m(12,M,14,10,"div",10,F),n(),i(14,"div",11)(15,"div")(16,"p")(17,"span",12),o(18,"Shipping to:"),n(),o(19),n(),i(20,"p",6),o(21),n()(),i(22,"div",13)(23,"p",14),o(24),l(25,"currency"),n(),i(26,"p",15),o(27),l(28,"titlecase"),n(),i(29,"p",16),o(30),n()()()()),d&2){let e=r.$implicit;t(4),a(" Order #",e.id," "),t(2),a(" Placed on: ",p(7,11,e.createdAt,"medium")," "),t(3),s("ngClass",e.isDelivered?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),t(),a(" ",e.isDelivered?"Delivered":"Pending Delivery"," "),t(2),c(e.cartItems),t(7),x(" ",e.shippingAddress.city,", ",e.shippingAddress.details,""),t(2),a("Phone: ",e.shippingAddress.phone,""),t(3),a("Total: ",p(25,14,e.totalOrderPrice,"GBP"),""),t(3),a("Payment: ",_(28,17,e.paymentMethodType),""),t(2),s("ngClass",e.isPaid?"text-green-600":"text-red-600"),t(),a(" ",e.isPaid?"Paid":"Not Paid"," ")}}function $(d,r){if(d&1&&m(0,U,31,19,"div",3,B),d&2){let e=C();c(e.orders.reverse())}}var D=class d{constructor(r){this.ordersService=r}cartService=v(w);userId="";decodedToken;orders=[];ngOnInit(){this.getUserIdFromToken(),this.getAllOrders()}getUserIdFromToken(){localStorage.getItem("userToken")&&(this.decodedToken=A(localStorage.getItem("userToken")),this.userId=this.decodedToken.id)}getAllOrders(){this.ordersService.getUserOrders(this.userId).subscribe({next:r=>{console.log(r),this.orders=r,this.cartService.cartCount.set(0)},error:r=>{console.log(r)}})}static \u0275fac=function(e){return new(e||d)(f(O))};static \u0275cmp=u({type:d,selectors:[["app-allorders"]],decls:5,vars:1,consts:[[1,"max-w-6xl","mx-auto","px-4","py-8"],[1,"text-3xl","font-bold","text-center","mb-8"],[1,"text-center","text-gray-500"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","shadow-md","mb-8","p-6"],[1,"flex","flex-col","md:flex-row","md:justify-between","md:items-center","border-b","pb-4","mb-4"],[1,"text-xl","font-semibold","text-gray-800","dark:text-gray-200"],[1,"text-sm","text-gray-500"],[1,"mt-3","md:mt-0"],[1,"px-3","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"space-y-4"],[1,"flex","items-center","space-x-4","border-b","pb-4"],[1,"mt-6","flex","flex-col","md:flex-row","md:justify-between","md:items-center","gap-4"],[1,"font-semibold"],[1,"text-right"],[1,"text-lg","font-bold"],[1,"text-sm"],[1,"text-sm",3,"ngClass"],[1,"w-20","h-20","rounded-lg","object-cover",3,"src","alt"],[1,"flex-1"],[1,"font-semibold","text-gray-800","dark:text-gray-200"],[1,"font-medium"],[1,"font-semibold","text-gray-900","dark:text-gray-100"]],template:function(e,j){e&1&&(i(0,"section",0)(1,"h1",1),o(2,"My Orders"),n(),y(3,N,2,0,"div",2)(4,$,2,0),n()),e&2&&(t(3),S(j.orders.length===0?3:4))},dependencies:[P,k,T,E],encapsulation:2})};export{D as AllordersComponent};
