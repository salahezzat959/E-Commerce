import{a as H}from"./chunk-WHZJNYLJ.js";import{a as I,b as g,c as O,d as M,h as N,i as q,j as G,k as V,m as D}from"./chunk-S7NLLRCM.js";import"./chunk-XTCYTLKK.js";import{o as L,q as T}from"./chunk-WFJGIRJF.js";import{$a as E,Ab as F,Bb as C,Ib as a,Ob as x,Pb as k,Qb as v,Ra as o,Y as p,ea as y,eb as l,fa as S,ga as f,ha as b,kb as _,ob as d,rb as e,sb as t,tb as m,wb as w}from"./chunk-VEIXIB2E.js";import"./chunk-EQDQRRRY.js";function B(i,n){i&1&&(e(0,"li"),a(1,"details is required"),t())}function A(i,n){if(i&1&&(e(0,"div",6),f(),e(1,"svg",12),m(2,"path",13),t(),b(),e(3,"span",14),a(4,"Danger"),t(),e(5,"div")(6,"ul",15),l(7,B,2,0,"li"),t()()()),i&2){C();let r=v(5);o(7),d(r!=null&&r.getError("required")?7:-1)}}function P(i,n){i&1&&(e(0,"li"),a(1,"Phone is required"),t())}function Z(i,n){i&1&&(e(0,"li"),a(1,"Enter valid phone"),t())}function j(i,n){if(i&1&&(e(0,"div",6),f(),e(1,"svg",12),m(2,"path",13),t(),b(),e(3,"span",14),a(4,"Danger"),t(),e(5,"div")(6,"ul",15),l(7,P,2,0,"li")(8,Z,2,0,"li"),t()()()),i&2){C();let r=v(11);o(7),d(r!=null&&r.getError("required")?7:r!=null&&r.getError("pattern")?8:-1)}}function z(i,n){i&1&&(e(0,"li"),a(1,"City is required"),t())}function $(i,n){if(i&1&&(e(0,"div",6),f(),e(1,"svg",12),m(2,"path",13),t(),b(),e(3,"span",14),a(4,"Danger"),t(),e(5,"div")(6,"ul",15),l(7,z,2,0,"li"),t()()()),i&2){C();let r=v(17);o(7),d(r!=null&&r.getError("required")?7:-1)}}function J(i,n){i&1&&(e(0,"span"),m(1,"i",16),t())}var R=class i{formBuilder=p(V);activatedRoute=p(L);ordersService=p(H);router=p(T);cartId="";checkOutForm;isLoading=!1;ngOnInit(){this.initForm(),this.getCartId(),localStorage.setItem("cardId",this.cartId)}initForm(){this.checkOutForm=this.formBuilder.group({details:[null,[g.required]],phone:[null,[g.required,g.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[g.required]]})}getCartId(){this.activatedRoute.paramMap.subscribe({next:n=>{this.cartId=n.get("id")}})}submitForm(){this.isLoading=!0,this.ordersService.checkoutPayment(this.cartId,this.checkOutForm.value).subscribe({next:n=>{console.log(n),n.status=="success"&&open(n.session.url,"_self"),this.isLoading=!1},error:n=>{console.log(n)}})}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=E({type:i,selectors:[["app-checkout"]],decls:25,vars:9,consts:[[1,"mx-auto","w-[60%]","bg-gray-50","rounded","border-1","shadow","p-5"],[1,"capitalize","text-2xl","text-green-600","font-bold","pb-3","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","details",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","details","id","details",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","phone","type","tel","id","phone",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","city","type","text","id","password",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","submit",1,"btn-main",3,"disabled"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"],[1,"fas","fa-spin","fa-spinner"]],template:function(r,c){if(r&1){let u=w();e(0,"section",0)(1,"h1",1),a(2,"Check Out"),t(),e(3,"form",2),F("ngSubmit",function(){return y(u),S(c.submitForm())}),e(4,"div",3),x(5),e(6,"label",4),a(7,"details:"),t(),m(8,"textarea",5),l(9,A,8,1,"div",6),t(),e(10,"div",3),x(11),e(12,"label",7),a(13,"phone:"),t(),m(14,"input",8),l(15,j,9,1,"div",6),t(),e(16,"div",3),x(17),e(18,"label",9),a(19,"city:"),t(),m(20,"input",10),l(21,$,8,1,"div",6),t(),e(22,"button",11),a(23,"payment "),l(24,J,2,0,"span"),t()()()}if(r&2){o(3),_("formGroup",c.checkOutForm),o(2);let u=k(c.checkOutForm.get("details"));o(4),d(u!=null&&u.errors&&(u!=null&&u.touched)?9:-1),o(2);let s=k(c.checkOutForm.get("phone"));o(4),d(s!=null&&s.errors&&(s!=null&&s.touched)?15:-1),o(2);let h=k(c.checkOutForm.get("city"));o(4),d(h!=null&&h.errors&&(h!=null&&h.touched)?21:-1),o(),_("disabled",c.isLoading),o(2),d(c.isLoading?24:-1)}},dependencies:[D,N,I,O,M,q,G],encapsulation:2})};export{R as CheckoutComponent};
