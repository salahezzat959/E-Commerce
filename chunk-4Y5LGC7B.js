import{a as $}from"./chunk-7BSCAMFA.js";import{a as F,m as Y}from"./chunk-AJ6U6MDO.js";import"./chunk-XTCYTLKK.js";import{h as P,r as V}from"./chunk-WFJGIRJF.js";import{$a as I,Ab as C,Bb as s,Ib as a,Jb as v,Kb as g,Oa as w,Ra as l,Sb as B,Wb as b,Xa as D,Y as S,Yb as h,ea as d,eb as k,fa as u,kb as x,ob as y,pb as E,qb as T,rb as n,sb as o,tb as p,wb as _}from"./chunk-VEIXIB2E.js";import{e as O}from"./chunk-EQDQRRRY.js";var f=O($());var L=r=>["/checkout",r],N=(r,e)=>e.product.id;function U(r,e){if(r&1){let t=_();n(0,"div",6)(1,"div"),p(2,"img",8),o(),n(3,"div",9)(4,"div")(5,"h3"),a(6),o(),n(7,"h4"),a(8),b(9,"currency"),o(),n(10,"button",10),C("click",function(){let c=d(t).$implicit,m=s(2);return u(m.deleteItem(c.product.id))}),p(11,"i",11),a(12,"Remove"),o()(),n(13,"div",12)(14,"button",13),C("click",function(){let c=d(t).$implicit,m=s(2);return u(m.updateCount(c.product.id,c.count+1))}),p(15,"i",14),o(),n(16,"span"),a(17),o(),n(18,"button",13),C("click",function(){let c=d(t).$implicit,m=s(2);return u(m.updateCount(c.product.id,c.count-1))}),p(19,"i",15),o()()()()}if(r&2){let t=e.$implicit;l(2),x("src",t.product.imageCover,w)("alt",t.product.title),l(4),v(t.product.title),l(2),g("Price: ",h(9,5,t.price,"GBP"),""),l(9),v(t.count)}}function q(r,e){if(r&1){let t=_();n(0,"section",0)(1,"h1",2),a(2," \u{1F6D2} Your Cart"),o(),n(3,"div",3)(4,"span",4),a(5),b(6,"currency"),o(),n(7,"button",5),C("click",function(){d(t);let c=s();return u(c.clearCart())}),a(8,"Clear Cart"),o()(),E(9,U,20,8,"div",6,N),n(11,"button",7),a(12,"Online Payment"),o()()}if(r&2){let t=s();l(5),g("Total Cart Price : ",h(6,2,t.cartDetails.totalCartPrice,"GBP"),""),l(4),T(t.cartDetails.products),l(2),x("routerLink",B(5,L,t.cartDetails._id))}}function A(r,e){r&1&&(n(0,"h1",1),a(1,"No Data Found"),o())}var j=class r{constructor(e){this.cartService=e}toastrService=S(Y);cartDetails={};ngOnInit(){this.getCartData(),localStorage.setItem("userId",this.cartDetails._id)}getCartData(){this.cartService.getLoggedUserCart().subscribe({next:e=>{console.log(e.data),this.cartDetails=e.data},error:e=>{console.log(e)}})}deleteItem(e){f.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&(this.cartService.removeFromCart(e).subscribe({next:i=>{console.log(i),this.cartDetails=i.data,this.cartService.cartCount.set(i.numOfCartItems)},error:i=>{console.log(i)}}),f.default.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}))})}updateCount(e,t){this.cartService.updateProductQuanity(e,t).subscribe({next:i=>{console.log(i),i.status=="success"&&this.toastrService.info("success","FreshCart"),this.cartDetails=i.data},error:i=>{console.log(i)}})}clearCart(){f.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&(this.cartService.clearUserCart().subscribe({next:t=>{console.log(t),t.message=="success"&&(this.cartDetails={},this.cartService.cartCount.set(0))},error:t=>{console.log(t)}}),f.default.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}))})}static \u0275fac=function(t){return new(t||r)(D(F))};static \u0275cmp=I({type:r,selectors:[["app-cart"]],decls:2,vars:1,consts:[[1,"min-sec","w-[75%]","mx-auto"],[1,"text-center","text-green-700","text-3xl"],[1,"text-green-600","text-center","text-3xl","font-bold","mb-6"],[1,"flex","justify-between","items-center","pb-3"],[1,"text-green-500"],[1,"bg-red-600","border","rounded","text-sm","px-10","text-white","hover:bg-red-400",3,"click"],[1,"grid","md:grid-cols-[10%_minmax(0,1fr)]","border-b","mb-2","gap-3"],[1,"btn-main",3,"routerLink"],[1,"w-full","object-contain",3,"src","alt"],[1,"flex","justify-between","items-center"],[3,"click"],[1,"fas","fa-trash-can","text-red-700"],[1,"flex","items-center","gap-4"],[1,"text-green-500","text-2xl",3,"click"],[1,"fa-regular","fa-square-plus"],[1,"fa-regular","fa-square-minus"]],template:function(t,i){t&1&&k(0,q,13,7,"section",0)(1,A,2,0,"h1",1),t&2&&y(i.cartDetails.totalCartPrice?0:1)},dependencies:[P,V],encapsulation:2})};export{j as CartComponent};
