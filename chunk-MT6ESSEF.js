import{c as B}from"./chunk-KPGLZVDS.js";import{a as I}from"./chunk-R6EMO2V3.js";import{a as R,b as f,c as q,d as A,h as D,i as G,j as V,k as P,m as M}from"./chunk-S7NLLRCM.js";import"./chunk-XTCYTLKK.js";import{q as T,r as N}from"./chunk-WFJGIRJF.js";import{$a as L,Ab as F,Bb as g,Ib as a,Jb as _,Kb as u,Ob as y,Pb as w,Qb as h,Ra as n,Wb as c,Xb as x,Y as b,ea as S,eb as m,fa as E,kb as C,ob as d,rb as o,sb as r,tb as v,wb as k}from"./chunk-VEIXIB2E.js";import"./chunk-EQDQRRRY.js";function H(e,t){e&1&&(o(0,"li"),a(1,"Email is required"),r())}function U(e,t){e&1&&(o(0,"li"),a(1,"Enter a valid email"),r())}function Z(e,t){if(e&1&&(o(0,"div",5)(1,"ul",16),m(2,H,2,0,"li")(3,U,2,0,"li"),r()()),e&2){g();let i=h(6);n(2),d(i!=null&&i.getError("required")?2:i!=null&&i.getError("email")?3:-1)}}function $(e,t){e&1&&(o(0,"li"),a(1,"Password is required"),r())}function z(e,t){e&1&&(o(0,"li"),a(1,"Enter a valid password"),r())}function J(e,t){if(e&1&&(o(0,"div",5)(1,"ul",16),m(2,$,2,0,"li")(3,z,2,0,"li"),r()()),e&2){g();let i=h(13);n(2),d(i!=null&&i.getError("required")?2:i!=null&&i.getError("pattern")?3:-1)}}function K(e,t){e&1&&v(0,"i",11)}function O(e,t){if(e&1&&(o(0,"div",14)(1,"span",17),a(2),r()()),e&2){let i=g();n(2),_(i.msgErr)}}function Q(e,t){if(e&1&&(o(0,"div",15)(1,"span",17),a(2),r()()),e&2){let i=g();n(2),_(i.msgSuc)}}var j=class e{authService=b(I);route=b(T);formBuilder=b(P);isLoading=!1;msgErr="";msgSuc="";loginForm=this.formBuilder.group({email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^[A-Z]\w{7,}$/)]]});submitForm(){this.loginForm.valid?(this.isLoading=!0,this.authService.sendLoginForm(this.loginForm.value).subscribe({next:t=>{console.log(t),t.message==="success"&&(setTimeout(()=>{localStorage.setItem("userToken",t.token),this.authService.saveUserData(),this.route.navigate(["/home"])},500),this.msgSuc=t.message),this.isLoading=!1},error:t=>{console.log(t),this.msgErr=t.error.message,this.isLoading=!1}})):this.loginForm.markAllAsTouched()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=L({type:e,selectors:[["app-login"]],decls:31,vars:21,consts:[[1,"max-w-xl","sm:max-w-2xl","lg:max-w-3xl","xl:max-w-4xl","mx-auto","bg-white","dark:bg-gray-900","rounded-xl","border","border-gray-200","dark:border-gray-700","shadow-lg","p-6","sm:p-8","my-10"],[1,"text-3xl","sm:text-4xl","font-bold","text-center","text-green-600","dark:text-green-400","mb-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["formControlName","email","type","email","id","email",1,"w-full","px-4","py-2","text-sm","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition"],[1,"mt-2","text-sm","text-red-600","dark:text-red-400"],["for","password",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["formControlName","password","type","password","id","password",1,"w-full","px-4","py-2","text-sm","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-4"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","text-white","font-medium","py-2","px-6","rounded-lg","transition",3,"disabled"],[1,"fas","fa-spin","fa-spinner","ml-2"],["routerLink","/forgot",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],["type","reset",1,"bg-lime-700","hover:bg-lime-600","text-white","font-medium","py-2","px-6","rounded-lg","transition"],[1,"mt-6","p-4","text-sm","text-red-700","bg-red-100","border","border-red-300","rounded-lg","dark:bg-gray-800","dark:text-red-400","dark:border-red-700"],[1,"mt-6","p-4","text-sm","text-green-700","bg-green-100","border","border-green-300","rounded-lg","dark:bg-gray-800","dark:text-green-400","dark:border-green-700"],[1,"list-disc","list-inside"],[1,"font-medium"]],template:function(i,l){if(i&1){let s=k();o(0,"section",0)(1,"h1",1),a(2),c(3,"translate"),r(),o(4,"form",2),F("ngSubmit",function(){return S(s),E(l.submitForm())}),o(5,"div"),y(6),o(7,"label",3),a(8),c(9,"translate"),r(),v(10,"input",4),m(11,Z,4,1,"div",5),r(),o(12,"div"),y(13),o(14,"label",6),a(15),c(16,"translate"),r(),v(17,"input",7),m(18,J,4,1,"div",5),r(),o(19,"div",8)(20,"div",9)(21,"button",10),a(22),c(23,"translate"),m(24,K,1,0,"i",11),r(),o(25,"a",12),a(26," Forgot Password "),r()(),o(27,"button",13),a(28," Reset "),r()(),m(29,O,3,1,"div",14)(30,Q,3,1,"div",15),r()()}if(i&2){n(2),u(" ",x(3,11,"login.loginNow")," "),n(2),C("formGroup",l.loginForm),n(2);let s=w(l.loginForm.get("email"));n(2),u(" ",x(9,14,"login.email"),": "),n(3),d(s!=null&&s.errors&&(s!=null&&s.touched)?11:-1),n(2);let p=w(l.loginForm.get("password"));n(2),u(" ",x(16,17,"login.password"),": "),n(3),d(p!=null&&p.errors&&(p!=null&&p.touched)?18:-1),n(3),C("disabled",l.isLoading),n(),u(" ",x(23,19,"login.signin")," "),n(2),d(l.isLoading?24:-1),n(5),d(l.msgErr&&!l.msgSuc?29:-1),n(),d(l.msgSuc?30:-1)}},dependencies:[M,D,R,q,A,G,V,N,B],encapsulation:2})};export{j as LoginComponent};
