import{c as B}from"./chunk-6GBPQ4MV.js";import{a as N}from"./chunk-QBHR2TKZ.js";import{a as R,b,c as q,d as A,h as D,i as G,j as V,k as M,m as j}from"./chunk-SLOV3VHQ.js";import"./chunk-Y5FLU7RQ.js";import{q as I,r as T}from"./chunk-T5ZE22VF.js";import{$a as E,Bb as F,Cb as f,Kb as a,Lb as g,Mb as u,Qb as y,Ra as t,Rb as w,Sb as h,Y as v,Yb as l,Zb as d,ea as S,eb as p,fa as L,kb as _,ob as s,sb as o,tb as r,ub as C,xb as k}from"./chunk-F43Q7SKA.js";import"./chunk-EQDQRRRY.js";function P(e,i){e&1&&(o(0,"li"),a(1),l(2,"translate"),r()),e&2&&(t(),g(d(2,1,"login.errors.emailRequired")))}function U(e,i){e&1&&(o(0,"li"),a(1),l(2,"translate"),r()),e&2&&(t(),g(d(2,1,"login.errors.emailInvalid")))}function Z(e,i){if(e&1&&(o(0,"div",5)(1,"ul",16),p(2,P,3,3,"li")(3,U,3,3,"li"),r()()),e&2){f();let n=h(6);t(2),s(n!=null&&n.getError("required")?2:n!=null&&n.getError("email")?3:-1)}}function $(e,i){e&1&&(o(0,"li"),a(1),l(2,"translate"),r()),e&2&&(t(),g(d(2,1,"login.errors.passwordRequired")))}function z(e,i){e&1&&(o(0,"li"),a(1),l(2,"translate"),r()),e&2&&(t(),g(d(2,1,"login.errors.passwordInvalid")))}function J(e,i){if(e&1&&(o(0,"div",5)(1,"ul",16),p(2,$,3,3,"li")(3,z,3,3,"li"),r()()),e&2){f();let n=h(13);t(2),s(n!=null&&n.getError("required")?2:n!=null&&n.getError("pattern")?3:-1)}}function K(e,i){e&1&&C(0,"i",11)}function O(e,i){if(e&1&&(o(0,"div",14)(1,"span",17),a(2),r()()),e&2){let n=f();t(2),g(n.msgErr)}}function Q(e,i){if(e&1&&(o(0,"div",15)(1,"span",17),a(2),r()()),e&2){let n=f();t(2),g(n.msgSuc)}}var H=class e{authService=v(N);route=v(I);formBuilder=v(M);isLoading=!1;msgErr="";msgSuc="";loginForm=this.formBuilder.group({email:[null,[b.required,b.email]],password:[null,[b.required,b.pattern(/^[A-Z]\w{7,}$/)]]});submitForm(){this.loginForm.valid?(this.isLoading=!0,this.authService.sendLoginForm(this.loginForm.value).subscribe({next:i=>{console.log(i),i.message==="success"&&(setTimeout(()=>{localStorage.setItem("userToken",i.token),this.authService.saveUserData(),this.route.navigate(["/home"])},500),this.msgSuc=i.message),this.isLoading=!1},error:i=>{console.log(i),this.msgErr=i.error.message,this.isLoading=!1}})):this.loginForm.markAllAsTouched()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=E({type:e,selectors:[["app-login"]],decls:33,vars:27,consts:[[1,"max-w-xl","sm:max-w-2xl","lg:max-w-3xl","xl:max-w-4xl","mx-auto","bg-white","dark:bg-gray-900","rounded-xl","border","border-gray-200","dark:border-gray-700","shadow-lg","p-6","sm:p-8","my-10"],[1,"text-3xl","sm:text-4xl","font-bold","text-center","text-green-600","dark:text-green-400","mb-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","email",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["formControlName","email","type","email","id","email",1,"w-full","px-4","py-2","text-sm","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition"],[1,"mt-2","text-sm","text-red-600","dark:text-red-400"],["for","password",1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["formControlName","password","type","password","id","password",1,"w-full","px-4","py-2","text-sm","rounded-lg","border","border-gray-300","dark:border-gray-600","bg-white","dark:bg-gray-800","text-gray-900","dark:text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-4"],["type","submit",1,"bg-green-600","hover:bg-green-700","text-white","font-medium","py-2","px-6","rounded-lg","transition",3,"disabled"],[1,"fas","fa-spin","fa-spinner","ml-2"],["routerLink","/forgot",1,"text-sm","text-blue-600","dark:text-blue-400","hover:underline"],["type","reset",1,"bg-lime-700","hover:bg-lime-600","text-white","font-medium","py-2","px-6","rounded-lg","transition"],[1,"mt-6","p-4","text-sm","text-red-700","bg-red-100","border","border-red-300","rounded-lg","dark:bg-gray-800","dark:text-red-400","dark:border-red-700"],[1,"mt-6","p-4","text-sm","text-green-700","bg-green-100","border","border-green-300","rounded-lg","dark:bg-gray-800","dark:text-green-400","dark:border-green-700"],[1,"list-disc","list-inside"],[1,"font-medium"]],template:function(n,m){if(n&1){let c=k();o(0,"section",0)(1,"h1",1),a(2),l(3,"translate"),r(),o(4,"form",2),F("ngSubmit",function(){return S(c),L(m.submitForm())}),o(5,"div"),y(6),o(7,"label",3),a(8),l(9,"translate"),r(),C(10,"input",4),p(11,Z,4,1,"div",5),r(),o(12,"div"),y(13),o(14,"label",6),a(15),l(16,"translate"),r(),C(17,"input",7),p(18,J,4,1,"div",5),r(),o(19,"div",8)(20,"div",9)(21,"button",10),a(22),l(23,"translate"),p(24,K,1,0,"i",11),r(),o(25,"a",12),a(26),l(27,"translate"),r()(),o(28,"button",13),a(29),l(30,"translate"),r()(),p(31,O,3,1,"div",14)(32,Q,3,1,"div",15),r()()}if(n&2){t(2),u(" ",d(3,13,"login.loginNow")," "),t(2),_("formGroup",m.loginForm),t(2);let c=w(m.loginForm.get("email"));t(2),u(" ",d(9,16,"login.email"),": "),t(3),s(c!=null&&c.errors&&(c!=null&&c.touched)?11:-1),t(2);let x=w(m.loginForm.get("password"));t(2),u(" ",d(16,19,"login.password"),": "),t(3),s(x!=null&&x.errors&&(x!=null&&x.touched)?18:-1),t(3),_("disabled",m.isLoading),t(),u(" ",d(23,21,"login.signin")," "),t(2),s(m.isLoading?24:-1),t(2),u(" ",d(27,23,"login.forgetpassword")," "),t(3),u(" ",d(30,25,"login.reset")," "),t(2),s(m.msgErr&&!m.msgSuc?31:-1),t(),s(m.msgSuc?32:-1)}},dependencies:[j,D,R,q,A,G,V,T,B],encapsulation:2})};export{H as LoginComponent};
