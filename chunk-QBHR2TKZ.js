import{a as h}from"./chunk-Y5FLU7RQ.js";import{q as u}from"./chunk-T5ZE22VF.js";import{S as l,X as s,Y as c,uc as p}from"./chunk-F43Q7SKA.js";var a=class extends Error{};a.prototype.name="InvalidTokenError";function b(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let o=r.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function m(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b(t)}catch{return atob(t)}}function d(e,t){if(typeof e!="string")throw new a("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,o=e.split(".")[r];if(typeof o!="string")throw new a(`Invalid token specified: missing part #${r+1}`);let n;try{n=m(o)}catch(i){throw new a(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(n)}catch(i){throw new a(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}var f=class e{constructor(t,r){this.httpClient=t;this.urlPath=r}userData=null;router=c(u);sendRegisterForm(t){return this.httpClient.post(this.urlPath+"/auth/signup",t)}sendLoginForm(t){return this.httpClient.post(this.urlPath+"/auth/signin",t)}saveUserData(){localStorage.getItem("userToken")!==null&&(this.userData=d(localStorage.getItem("userToken")),console.log("userData",this.userData))}logOut(){localStorage.removeItem("userToken"),this.userData=null,this.router.navigate(["/login"])}setEmailVerify(t){return this.httpClient.post(this.urlPath+"/auth/forgotPasswords",t)}setCodeVerify(t){return this.httpClient.post(this.urlPath+"/auth/verifyResetCode",t)}setNewPassword(t){return this.httpClient.put(this.urlPath+"/auth/resetPassword",t)}static \u0275fac=function(r){return new(r||e)(s(p),s(h))};static \u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})};export{f as a};
